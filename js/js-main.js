// Website Content
var cldWebsiteInfo = {
    'portfolio': {
        'samsungcomparisontable': {
            'name': 'Samsung Comparison Table',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'Generator',
            'ctaLinkOne': 'https://claudiocamba.github.io/s21comparisontable/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/s21comparisontable/',
            'techUsed': [
                ['assets/icons/adobe-target-icon.png', 'Adobe Target'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/javascript-icon.png', 'JavaScript'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': false,
                    'vertical': false,
                    'cssEase': 'ease',
                    'verticalSwiping': false,
                    'autoplay': false,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['https://player.vimeo.com/video/580855196', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/comparison-tables/comparison-table-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/comparison-tables/comparison-table-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/comparison-tables/comparison-table-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'samsungcartabandonment': {
            'name': 'Samsung Cart Abandonment',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'Generator',
            'ctaLinkOne': 'https://claudiocamba.github.io/imcartabandonment/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/imcartabandonment',
            'techUsed': [
                ['assets/icons/adobe-target-icon.png', 'Adobe Target'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/javascript-icon.png', 'JavaScript'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': true,
                    'vertical': false,
                    'cssEase': 'ease',
                    'verticalSwiping': false,
                    'autoplay': false,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['https://player.vimeo.com/video/582152829', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/cart-abandonment/cart-abandonment-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/cart-abandonment/cart-abandonment-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/cart-abandonment/cart-abandonment-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/cart-abandonment/cart-abandonment-slide-4.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'samsungcataffinity': {
            'name': 'Samsung Category Affinity',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'Generator',
            'ctaLinkOne': 'https://claudiocamba.github.io/imcategoryaffinity/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/imcategoryaffinity',
            'techUsed': [
                ['assets/icons/adobe-target-icon.png', 'Adobe Target'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/javascript-icon.png', 'JavaScript'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': true,
                    'vertical': false,
                    'cssEase': 'ease',
                    'verticalSwiping': false,
                    'autoplay': false,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['https://player.vimeo.com/video/582157253', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/category-affinity/category-affinity-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/category-affinity/category-affinity-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/category-affinity/category-affinity-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/category-affinity/category-affinity-slide-4.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/category-affinity/category-affinity-slide-5.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'samsungusp': {
            'name': 'Samsung USP',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'Generator',
            'ctaLinkOne': 'https://claudiocamba.github.io/uspgenerator/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/uspgenerator',
            'techUsed': [
                ['assets/icons/adobe-target-icon.png', 'Adobe Target'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/javascript-icon.png', 'JavaScript'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': false,
                    'vertical': true,
                    'cssEase': 'ease',
                    'verticalSwiping': true,
                    'autoplay': false,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['https://player.vimeo.com/video/582147719', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/mmp-usp/usp-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/mmp-usp/usp-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/mmp-usp/usp-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/mmp-usp/usp-slide-4.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/mmp-usp/usp-slide-5.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']

                ]
            }
        },
        'targetav': {
            'name': 'Target AV',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'View Live',
            'ctaLinkOne': 'https://www.targetav.com/index.php',
            'learnCta': 'Learn More',
            'techUsed': [
                ['assets/icons/photoshop-icon.png', 'Photoshop'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': false,
                    'vertical': true,
                    'cssEase': 'ease',
                    'verticalSwiping': true,
                    'autoplay': true,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['assets/projects/targetav/targetav-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/targetav/targetav-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/targetav/targetav-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/targetav/targetav-slide-4.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'gpmc': {
            'name': 'GPMC',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'View Live',
            'ctaLinkOne': 'https://www.gpmcq.com/index.php',
            'learnCta': 'Learn More',
            'techUsed': [
                ['assets/icons/photoshop-icon.png', 'Photoshop'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': false,
                    'vertical': true,
                    'cssEase': 'ease',
                    'verticalSwiping': true,
                    'autoplay': true,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['assets/projects/gpmc/gpmc-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/gpmc/gpmc-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/gpmc/gpmc-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/gpmc/gpmc-slide-4.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/gpmc/gpmc-slide-5.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'portfoliov1': {
            'name': 'Claudio Portfolio V1',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'View Live',
            'ctaLinkOne': 'https://claudiocamba.github.io/Portfolio/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/Portfolio',
            'techUsed': [
                ['assets/icons/photoshop-icon.png', 'Photoshop'],
                ['assets/icons/bootstrap-icon.png', 'Bootstrap'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': false,
                    'vertical': true,
                    'cssEase': 'ease',
                    'verticalSwiping': true,
                    'autoplay': true,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['assets/projects/portfolio-v1/portfoliov1-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/portfolio-v1/portfoliov1-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/portfolio-v1/portfoliov1-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'minagent': {
            'name': 'Minagent',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'View Live',
            'ctaLinkOne': 'https://claudiocamba.github.io/Minagent/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/Minagent',
            'techUsed': [
                ['assets/icons/photoshop-icon.png', 'Photoshop'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/bootstrap-icon.png', 'Bootstrap'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': false,
                    'vertical': true,
                    'cssEase': 'ease',
                    'verticalSwiping': true,
                    'autoplay': true,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['assets/projects/minagent/minagent-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/minagent/minagent-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/minagent/minagent-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        },
        'faceman': {
            'name': 'Faceman',
            'desc': 'A re-imagined version of the famous hangman game, this game is for two or more players, one player submits a word and the other player(s) must try to guess by suggesting letters, with a limited number of attempts.',
            'ctaLinkOneText': 'View Live',
            'ctaLinkOne': 'https://claudiocamba.github.io/Faceman/',
            'learnCta': 'Learn More',
            'ctaLinkTwo': 'Repository',
            'ctaLinkTwoText': 'https://github.com/ClaudioCamba/Faceman',
            'techUsed': [
                ['assets/icons/photoshop-icon.png', 'Photoshop'],
                ['assets/icons/jquery-icon.png', 'jQuery'],
                ['assets/icons/bootstrap-icon.png', 'Bootstrap'],
                ['assets/icons/css3-icon.png', 'CSS3'],
                ['assets/icons/html5-icon.png', 'HTML5']
            ],
            'modalContent': {
                'slick': {
                    'infinite': true,
                    'speed': 1000,
                    'fade': true,
                    'vertical': false,
                    'cssEase': 'ease-in-out',
                    'verticalSwiping': false,
                    'autoplay': true,
                    'autoplaySpeed': 3000
                },
                'imgsAndDesc': [
                    ['assets/projects/faceman/faceman-slide-1.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/faceman/faceman-slide-2.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players'],
                    ['assets/projects/faceman/faceman-slide-3.jpg', 'face man slide 1 alt', 'A re-imagined version of the famous hangman game, this game is for two or more players']
                ]
            }
        }
    }
};

// Section Variables ----- //
var form = document.getElementById("my-form"),
    cldBody = document.querySelector('body'),
    cldProjectSec = document.getElementById('cld-projects'),
    cldContactSec = document.getElementById('cld-contact'),
    cldProjectBtn = document.querySelectorAll('.portfolio-btn')[0],
    cldContactBtn = document.querySelectorAll('.contact-btn')[0],
    cldLearnBtn = document.querySelectorAll('.cld-learn, .cld-box-img>a'),
    cldModalBg = document.querySelector('.cld-modal-bg'),
    cldModalContent = document.querySelector('.cld-modal-content'),
    cldModalCloseBtn = document.querySelector('.cld-modal-close'),
    cldModalTitle = document.querySelector('.cld-modal-body-title'),
    cldModalCtaWrap = document.querySelector('.cld-modal-cta-wrap'),
    cldModalList = document.querySelector('.cld-modal-body-list'),
    cldModalSlider = document.querySelector('.cld-modal-body-img'),
    cldModalLink1 = document.querySelector('.cld-modal-link1'),
    cldModalLink2 = document.querySelector('.cld-modal-link2'),
    cldModalUsedTech = document.querySelectorAll('.cld-modal-used-tech'),
    cldUsedTech = document.querySelectorAll('.cld-used-tech'),
    cldIntroBtm = document.querySelector('.cld-intro-btm'),
    cldVidWidth = 0,
    cldModalData = '',
    cldIntervalCounter = 0,
    iframe,
    player,
    cldImgRefresh;

// Scroll to updated message
function scrollToFormMsg() {
    cldContactSec.querySelector('.cld-intouch').scrollIntoView({
        behavior: "smooth",
        block: "center",
        inline: "center"
    });
};

// Vimeo video control
function cldiFrameVidControl() {
    if (document.querySelectorAll('.cld-modal-vid-wrap iframe').length > 0) {
        iframe = document.querySelector('.cld-modal-vid-wrap iframe');
        player = new Vimeo.Player(iframe);

        player.ready().then(function() {
            // the player is ready
            // console.log('READY');
        });

        player.on('play', function() {
            if (cldModalContent.classList.contains('cld-slider-playing')) {
                // console.log('played the video!');
                $(cldModalSlider).slick('slickPause');
                cldSliderState();
            };
        });

        player.getVideoTitle().then(function(title) {
            // console.log('title:', title);
            iframe.classList.add('cld-vid-loaded');
        });

        // Updating player colour
        player.setColor('#EAB32C').then(function(color) {
            // The new color value: #00ADEF
            // console.log('player colour', color);
        }).catch(function(error) {
            // An error occurred while setting the color
            // console.log(error);
        });

    }
};

// Pausing video with conditions
function cldVidPause() {
    // check if video has loaded
    if (document.querySelectorAll('.cld-modal-vid-wrap .cld-vid-loaded').length > 0) {
        player.getPaused().then(function(paused) {
            if (paused === false && !cldBody.classList.contains('cld-modal-show') || cldModalContent.classList.contains('cld-slider-playing')) {
                // `paused` indicates whether the player is paused
                // console.log('false', paused);
                player.pause();
            };
        });
    };
};

// Pausing video
function cldVidPausing() {
    if (document.querySelectorAll('.cld-modal-vid-wrap .cld-vid-loaded').length > 0) {
        player.getPaused().then(function(paused) {
            if (paused === false) {
                player.pause();
            }
        });
    }
};

// width detection & video sizes
function cldWidthDetect() {
    if (window.innerWidth > 1700) {
        cldVidWidth = 'width:1000px;height:562.5px;';
    } else if (window.innerWidth <= 1700 && window.innerWidth >= 976) {
        cldVidWidth = 'width:58.8235vw;height:33.0882vw;';
    } else if (window.innerWidth <= 975 && window.innerWidth >= 476) {
        cldVidWidth = 'width:88.9230vw;height:59.2820vw;';
    } else if (window.innerWidth <= 475) {
        cldVidWidth = 'width:100vw;height:66.6652vw;';
    };
};

// Form Submition 
function cldFormSubmit() {
    async function handleSubmit(event) {
        event.preventDefault();
        var data = new FormData(event.target);
        fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
                'Accept': 'application/json'
            }
        }).then(response => {
            form.reset();
            cldContactSec.classList.remove('cld-form-error');
            cldContactSec.classList.add('cld-form-submitted');
            cldContactSec.querySelector('.cld-kv-default').setAttribute('src', 'assets/other/claudio-camba-contact-kv-submitted.png');
            cldContactSec.querySelector('.cld-intouch').innerText = 'Thanks for your submission!'
            scrollToFormMsg();
        }).catch(error => {
            if (!cldContactSec.classList.contains('cld-form-submitted')) {
                cldContactSec.classList.add('cld-form-error');
                cldContactSec.querySelector('.cld-kv-default').setAttribute('src', 'assets/other/claudio-camba-contact-kv-error.png');
                cldContactSec.querySelector('.cld-intouch').innerText = 'Oops! There was a problem submitting your form';
                scrollToFormMsg();
            }
        });
    }
    form.addEventListener("submit", handleSubmit);
};

// Show / Hide Intro Desc Class
function cldShowHideIntroDesc() {
    if (cldIntroBtm.className.indexOf('cld-long-desc') < 0) {
        cldIntroBtm.classList.add('cld-long-desc');
    }
};

// Used tech ----- //
function cldUsedTechs() {
    for (var e = 0; e < cldUsedTech.length; e++) {
        var cldHoldtech = cldUsedTech[e].getAttribute('data-modal');
        for (var t = 0; t < cldWebsiteInfo.portfolio[cldHoldtech].techUsed.length; t++) {
            if (t === 0) {
                cldUsedTech[e].innerHTML = '<img alt="' + cldWebsiteInfo.portfolio[cldHoldtech].techUsed[t][1] + ' Icon' + '" src="' + cldWebsiteInfo.portfolio[cldHoldtech].techUsed[t][0] + '">';
            } else {
                cldUsedTech[e].innerHTML = cldUsedTech[e].innerHTML + '<img alt="' + cldWebsiteInfo.portfolio[cldHoldtech].techUsed[t][1] + ' Icon' + '" src="' + cldWebsiteInfo.portfolio[cldHoldtech].techUsed[t][0] + '">';
            }
        }
    }
};

// Main Section ----- //
function cldSecDetect() {
    if (cldContactSec.getBoundingClientRect().top <= cldContactBtn.getBoundingClientRect().bottom) {
        cldBody.classList.add('cld-contact-view');
        cldBody.classList.remove('cld-projects-view', 'cld-intro-view');
    } else if (cldProjectSec.getBoundingClientRect().top <= cldProjectBtn.getBoundingClientRect().bottom) {
        cldBody.classList.add('cld-projects-view');
        cldBody.classList.remove('cld-contact-view', 'cld-intro-view');
    } else {
        cldBody.classList.add('cld-intro-view');
        cldBody.classList.remove('cld-contact-view', 'cld-projects-view');
    };
};

// Navigation smooth scroll ----- //
function cldSmoothScroll() {
    $(document).on('click', 'a[href^="#"]', function(event) {
        event.preventDefault();

        $('html, body').animate({
            scrollTop: $($.attr(this, 'href')).offset().top
        }, 800);
    });
};

// Control Slider state
function cldPlayPause() {
    // Toggle Play / Pause
    if (cldModalSlider.slick.paused) {
        $(cldModalSlider).slick('slickPlay');
        $(cldModalSlider).slick('slickNext');
        cldModalContent.classList.add('cld-slider-playing');
    } else {
        // console.log('playing');
        $(cldModalSlider).slick('slickPause');
        cldModalContent.classList.remove('cld-slider-playing');
    };
};

// Detect Slider state
function cldSliderState() {
    if (cldModalSlider.classList.contains('slick-initialized')) {
        if (cldModalSlider.slick.paused) {
            // console.log('paused');
            cldModalContent.classList.remove('cld-slider-playing');
        } else {
            // console.log('playing');
            cldModalContent.classList.add('cld-slider-playing');
        };
    }
    cldVidPause();
};

// Modal projects open / close ----- //
function cldModalOpenClose() {
    // open
    cldLearnBtn.forEach(function(btn) {
        btn.addEventListener('click', function() {
            // Handle click ----- //
            if (cldModalData !== this.getAttribute('data-modal')) {
                cldModalData = this.getAttribute('data-modal');
                cldModalPopulating();
                // console.log('New Card Populating Modal');
            };
            // Show Modal
            cldBody.classList.add('cld-modal-show');
            // Fix carousel loading issue
            if (cldModalSlider.querySelectorAll('iframe').length < 0) {
                $('.slick-slider').slick('refresh');
            }
        });
    });
    // close
    cldBody.addEventListener('click', function(event) {
        if (cldBody.classList.value.indexOf('cld-modal-show') > -1) {
            if (event.target !== cldModalBg && event.target !== cldModalCloseBtn) {
                // console.log('Clicked On Modal');
                cldSliderState();
            } else {
                cldClosingModal();
            };
        };

    });
    // close button
    cldModalCloseBtn.addEventListener('click', function(event) {
        cldClosingModal();
    });
};

// Slick eventlistners ----- //
function cldSlickListner() {

    // On After slide change eventlistner
    $(cldModalSlider).on('beforeChange', function(event, slick, currentSlide, nextSlide) {
        for (var y = 0; y < cldModalList.querySelectorAll('li').length; y++) {
            cldModalList.querySelectorAll('li')[y].classList.remove('cld-modal-active');
        };
        cldModalList.querySelectorAll('li')[nextSlide].classList.add('cld-modal-active');
        // console.log('Slide Change');
        cldVidPausing();
    });

    //  On after slick initialised
    $(cldModalSlider).on('init', function(event, slick) {
        if (cldModalList.outerHTML.indexOf('cld-modal-active') < 0) {
            cldModalList.querySelectorAll('li')[0].classList.add('cld-modal-active');
            // console.log('Highlight Initial List');
        }
    });
};

// Modal closing ----- //
function cldClosingModal() {
    cldBody.classList.remove('cld-modal-show');
    cldModalContent.removeAttribute('style');
    // Pausing slick slider
    $(cldModalSlider).slick('slickPause');
    cldSliderState();
    // console.log('Closing Modal');
};

// List control slider ----- //
function cldListControl(index) {
    cldVidPausing();

    cldIntervalCounter = 0;

    var gridCheckjQuery = setInterval(function() {
        if (index === $(cldModalSlider).slick('slickCurrentSlide')) {
            clearInterval(gridCheckjQuery); //clear interval 
            // console.log('CLEARED');
        } else if (cldIntervalCounter >= 5) {
            clearInterval(gridCheckjQuery); //clear interval
            // console.log('CLEARED2');
        } else {
            // console.log('DONE IT');
            $(cldModalSlider).slick('slickGoTo', index);
            $(cldModalSlider).slick('slickPause');
            cldSliderState();
        }
    }, 200);
};


// Onload functions ----- //
var chkReadyState = setInterval(function() {
    if (document.readyState == 'complete') {
        // clear the interval
        clearInterval(chkReadyState);
        // finally your page is loaded.
        cldSecDetect();
        cldModalOpenClose();
        cldSmoothScroll();
        cldUsedTechs();
        cldSlickListner();
        cldFormSubmit();
    }
}, 100);

// Scroll eventlistener ----- // 
window.addEventListener('scroll', function() {
    cldSecDetect();
});

// Resize eventlistener ----- //
window.addEventListener('resize', function() {
    cldSecDetect();
    cldWidthDetect();
    if (cldBody.classList.contains('cld-modal-show')) {
        $('.slick-slider').slick('refresh');
        for (var d = 0; d < document.querySelectorAll('.cld-modal-vid-wrap iframe').length; d++) {

            if (document.querySelectorAll('.cld-modal-vid-wrap iframe')[0].attributes.style.value !== cldVidWidth) {
                document.querySelectorAll('.cld-modal-vid-wrap iframe')[d].setAttribute('style', cldVidWidth);
                // console.log('DOESNT MATCH');
            }
        };
        setTimeout(function() {
            cldiFrameVidControl();
        }, 1000);

    };
    cldSliderState();
});

// Refreshing Images after modal load
function cldModalImgRefresh() {
    if (cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[0].toString().indexOf('/video/') < 1 && cldModalSlider.querySelectorAll('img').length >= cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[0].length) {
        if (cldModalSlider.classList.contains('slick-initialized')) {
            $(cldModalSlider).slick('refresh');
            clearInterval(cldImgRefresh);
            console.log('CLEARED');
        }
        // console.log('test1');
    }
    // console.log('test2');
};

// Modal Populating ----- //
function cldModalPopulating() {

    cldWidthDetect();

    // Appending slide images
    for (var i = 0; i < cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc.length; i++) {
        if (i === 0) {
            if (cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i].toString().indexOf('/video/') > -1) {
                cldModalSlider.innerHTML = '<div class="cld-modal-vid-wrap"><iframe style="' + cldVidWidth + '" src="' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][0] + '" frameborder="0" allow="autoplay; picture-in-picture"></iframe></div>';
                cldModalList.innerHTML = '<li><span class="cld-list-desc" onclick="cldListControl(' + i + ')" li-index="' + i + '">' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][1] + '</span><span onclick="cldPlayPause()" class="cld-play-pause"><img class="cld-slide-play" alt="image" src="assets/icons/play-icon.png"><img class="cld-slide-pause" alt="image" src="assets/icons/pause-icon.png"></span></li>';
            } else {
                cldModalSlider.innerHTML = '<img alt="' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][1] + '" src="' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][0] + '">';
                cldModalList.innerHTML = '<li><span class="cld-list-desc" onclick="cldListControl(' + i + ')" li-index="' + i + '">' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][2] + '</span><span onclick="cldPlayPause()" class="cld-play-pause"><img class="cld-slide-play" alt="image" src="assets/icons/play-icon.png"><img class="cld-slide-pause" alt="image" src="assets/icons/pause-icon.png"></span></li>';
            };
            // console.log('Append First Img & List');

        } else {
            if (cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i].toString().indexOf('/video/') > -1) {
                cldModalSlider.innerHTML = cldModalSlider.innerHTML + '<div class="cld-modal-vid-wrap"><iframe style="' + cldVidWidth + '" src="' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][0] + '" frameborder="0" allow="autoplay; picture-in-picture"></iframe></div>';
                cldModalList.innerHTML = cldModalList.innerHTML + '<li><span class="cld-list-desc" onclick="cldListControl(' + i + ')" li-index="' + i + '">' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][1] + '</span><span onclick="cldPlayPause()" class="cld-play-pause"><img class="cld-slide-play" alt="image" src="assets/icons/play-icon.png"><img class="cld-slide-pause" alt="image" src="assets/icons/pause-icon.png"></span></li>';
            } else {
                cldModalSlider.innerHTML = cldModalSlider.innerHTML + '<img alt="' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][1] + '" src="' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][0] + '">';
                cldModalList.innerHTML = cldModalList.innerHTML + '<li><span class="cld-list-desc" onclick="cldListControl(' + i + ')" li-index="' + i + '">' + cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[i][2] + '</span><span onclick="cldPlayPause()" class="cld-play-pause"><img class="cld-slide-play" alt="image" src="assets/icons/play-icon.png"><img class="cld-slide-pause" alt="image" src="assets/icons/pause-icon.png"></span></li>';
            };
            // console.log('Append Rest Img & List');

        };
    };

    // Description and links
    if (typeof cldWebsiteInfo.portfolio[cldModalData].name != "undefined") {
        cldModalTitle.innerHTML = '<h1 class="cld-modal-title">' + cldWebsiteInfo.portfolio[cldModalData].name + '</h1>';
    } else {
        cldModalTitle.innerHTML = '';
    }

    if (typeof cldWebsiteInfo.portfolio[cldModalData].ctaLinkOne != "undefined") {
        cldModalLink1.innerHTML = '<span>' + cldWebsiteInfo.portfolio[cldModalData].ctaLinkOneText + '</span>';
        cldModalLink1.setAttribute('href', cldWebsiteInfo.portfolio[cldModalData].ctaLinkOne);
        cldModalCtaWrap.removeAttribute('style');
    } else {
        cldModalLink1.innerHTML = '';
        cldModalLink1.setAttribute('href', '');
        cldModalCtaWrap.style.justifyContent = 'center';
    }

    if (typeof cldWebsiteInfo.portfolio[cldModalData].ctaLinkTwo != "undefined") {
        cldModalLink2.innerHTML = '<span>' + cldWebsiteInfo.portfolio[cldModalData].ctaLinkTwo + '</span>';
        cldModalLink2.setAttribute('href', cldWebsiteInfo.portfolio[cldModalData].ctaLinkTwoText);
        cldModalCtaWrap.removeAttribute('style');
    } else {
        cldModalLink2.innerHTML = '';
        cldModalLink2.setAttribute('href', '');
        cldModalCtaWrap.style.justifyContent = 'center';
    }

    for (var x = 0; x < cldWebsiteInfo.portfolio[cldModalData].techUsed.length; x++) {
        for (var o = 0; o < cldModalUsedTech.length; o++) {
            if (x === 0) {
                cldModalUsedTech[o].innerHTML = '<div class="tooltip"><img alt="' + cldWebsiteInfo.portfolio[cldModalData].techUsed[x][1] + '" src="' + cldWebsiteInfo.portfolio[cldModalData].techUsed[x][0] + '"><span class="tooltiptext">' + cldWebsiteInfo.portfolio[cldModalData].techUsed[x][1] + '</span></div>';
            } else {
                cldModalUsedTech[o].innerHTML = cldModalUsedTech[o].innerHTML + '<div class="tooltip"><img alt="' + cldWebsiteInfo.portfolio[cldModalData].techUsed[x][1] + '" src="' + cldWebsiteInfo.portfolio[cldModalData].techUsed[x][0] + '"><span class="tooltiptext">' + cldWebsiteInfo.portfolio[cldModalData].techUsed[x][1] + '</span></div>';
            }
        }
    };

    // Reset div class before carousel initiate
    cldModalSlider.setAttribute('class', 'cld-modal-body-img');

    // Carousel Swipe Initiate
    $(cldModalSlider).slick({
        infinite: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.infinite,
        slidesToShow: 1,
        slidesToScroll: 1,
        dots: true,
        speed: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.speed,
        fade: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.fade,
        vertical: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.vertical,
        verticalSwiping: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.verticalSwiping,
        cssEase: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.cssEase,
        autoplay: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.autoplay,
        autoplaySpeed: cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.autoplaySpeed,
        draggable: true,
        pauseOnHover: true,
        pauseOnDotsHover: true,
        swipe: true,
        accessibility: true,
        focusOnSelect: true,
        pauseOnFocus: true,
        swipeToSlide: true,
        centerMode: true,
        arrows: true
    });

    // Check for vertical
    if (cldWebsiteInfo.portfolio[cldModalData].modalContent.slick.vertical) {
        cldModalContent.classList.add('cld-modal-vertical-btn');
    } else {
        cldModalContent.classList.remove('cld-modal-vertical-btn');
    };

    cldiFrameVidControl();

    // setTimeout(function() {
    //     if (cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[0].toString().indexOf('/video/') < 1) {
    //         $(cldModalSlider).slick('refresh');
    //         // console.log('REFRESH');
    //     }
    // }, 250);
    // If the first slide is not a video run the refresh function
    if (cldWebsiteInfo.portfolio[cldModalData].modalContent.imgsAndDesc[0].toString().indexOf('/video/') < 1) {
        cldImgRefresh = setInterval(cldModalImgRefresh, 100);
    };

};